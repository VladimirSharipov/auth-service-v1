# Auth Service

Сервис аутентификации с JWT токенами, реализующий требования по безопасности для access и refresh токенов.

## Функциональность

- **Получение пары токенов** по GUID пользователя
- **Обновление пары токенов** с защитой от повторного использования
- **Получение GUID пользователя** (защищенный endpoint)
- **Деавторизация пользователя** с инвалидацией токенов

## Требования безопасности

### Access Token
- Формат: JWT
- Алгоритм подписи: SHA512
- Не хранится в базе данных
- Короткое время жизни (15 минут по умолчанию)

### Refresh Token
- Произвольный формат (base64)
- Хранится в базе в виде bcrypt хеша
- Защищен от повторного использования (одноразовый)
- Защищен от изменений клиентом

### Операция Refresh
- Работает только с парными токенами
- Блокирует обновление при изменении User-Agent
- Отправляет webhook при изменении IP
- Автоматически деавторизует при подозрительной активности

## Примеры работы API (Swagger UI)

### Общий вид интерфейса

![Swagger UI - общий вид](screenshots/swagger-main.png)

### Получение access и refresh токенов

![Swagger UI - login](screenshots/swagger-login.png)

### Обновление пары токенов

![Swagger UI - refresh](screenshots/swagger-refresh.png)

### Получение GUID пользователя

![Swagger UI - me](screenshots/swagger-me.png)

### Деавторизация пользователя

![Swagger UI - logout](screenshots/swagger-logout.png)

## Развертывание

### Требования
- Docker
- Docker Compose

### Запуск
```bash
docker-compose up -d
```
